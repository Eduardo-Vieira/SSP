/*
 * Licensed to Jasig under one or more contributor license
 * agreements. See the NOTICE file distributed with this work
 * for additional information regarding copyright ownership.
 * Jasig licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file
 * except in compliance with the License. You may obtain a
 * copy of the License at:
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on
 * an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied. See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
(function(){var j,N={}.hasOwnProperty,m=function(a,b){function c(){this.constructor=a}for(var e in b)N.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a};j=jQuery;var d=namespace,r=function(a,b){this.name=a;this.filterFunction=b};r.COMPLETED=new r("Completed",function(a){return a.completed()});r.ALL=new r("All",function(){return!0});r.ACTIVE=new r("Active",function(a){return!a.completed()});r.enumerators=function(){return[r.ALL,r.ACTIVE,r.COMPLETED]};
d("mygps.enumeration",{TaskFilter:r});var d=namespace,H=function(a,b,c,e){this.id=ko.observable(a);this.name=ko.observable(b);this.description=ko.observable(c);this.referralCount=ko.observable(e);this.challengeReferrals=ko.observableArray()};H.createFromTransferObject=function(a){return new H(a.id,a.name,a.description,a.referralCount)};d("mygps.model",{Challenge:H});var d=namespace,I=function(a,b,c,e){this.id=ko.observable(a);this.name=ko.observable(b);this.description=ko.observable(c);this.details=
ko.observable(e)};I.createFromTransferObject=function(a){return new I(a.id,a.name,a.description,a.details)};d("mygps.model",{ChallengeReferral:I});var d=namespace,v=function(a,b,c,e){this.id=ko.observable(a);this.label=ko.observable(b);this.sections=ko.observableArray(c);this.completed=ko.observable(e);this.valid=ko.dependentObservable(this.evaluateValid,this);e=this.sections();b=0;for(c=e.length;b<c;b++)a=e[b],a.form(this)};v.prototype.evaluateValid=function(){return!_.any(this.sections(),function(a){return!a.valid()})};
v.prototype.validate=function(){var a,b,c,e;e=this.sections();b=0;for(c=e.length;b<c;b++)a=e[b],a.validate()};v.createFromTransferObject=function(a){var b;if(null!=a.sections){var c,e,h,n;h=a.sections;n=[];c=0;for(e=h.length;c<e;c++)b=h[c],n.push(mygps.model.FormSection.createFromTransferObject(b));b=n}return new v(a.id,a.label,b,a.completed)};v.toTransferObject=function(a){var b;if(a.sections()){var c,e,h,n;h=a.sections();n=[];c=0;for(e=h.length;c<e;c++)b=h[c],n.push(mygps.model.FormSection.toTransferObject(b));
b=n}return{id:a.id(),label:a.label(),sections:b}};d("mygps.model",{Form:v});var d=namespace,C=function(a,b,c){this.id=ko.observable(a);this.label=ko.observable(b);this.value=ko.observable(c)};C.createFromTransferObject=function(a){return new C(a.id,a.label,a.value)};C.toTransferObject=function(a){return{id:a.id(),label:a.label(),value:a.value()}};d("mygps.model",{FormOption:C});namespace("mygps.model",{FormQuestion:function(){function a(a,c,e,h,n,d,g,f,j,k,l,m){this.id=ko.observable(a);this.label=
ko.observable(c);this.type=ko.observable(e);this.value=ko.observable(h);this.values=ko.observableArray(n||[]);this.options=ko.observableArray(d||[]);this.readOnly=ko.observable(g);this.required=ko.observable(f);this.maximumLength=ko.observable(j);this.visibilityExpression=ko.observable(k);this.availabilityExpression=ko.observable(l);this.validationExpression=ko.observable(m);this.labelWithIndicator=ko.observable(f?c+" *":c);this.section=ko.observable(null);this.valid=ko.observable(!0);this.enabled=
ko.dependentObservable(this.evaluateEnabled,this);this.visible=ko.dependentObservable(this.evaluateVisible,this)}a.prototype.evaluateEnabled=function(){return this.readOnly()?!1:null!=this.availabilityExpression()?this.executeExpression(this.availabilityExpression()):!0};a.prototype.evaluateVisible=function(){return null!=this.visibilityExpression()?this.executeExpression(this.visibilityExpression()):!0};a.prototype.executeExpression=function(a){var c=this;window.getQuestionById=function(a){var b;
return _.detect(null!=(b=c.section())?b.questions():void 0,function(b){return b.id()===a})};window.hasValueForQuestionId=function(a,b){var c;c=getQuestionById(b);return null!=c?"checklist"===c.type()?_.include(c.values(),a):c.value()===a:!1};window.hasValue=function(a){return c.value()===a};window.isChecked=function(){return c.value()?!0:!1};return eval(a)};a.prototype.validate=function(){var a;a=!0;if(this.enabled()&&this.visible()){if(this.required()&&(null===this.value()||""===this.value()))a=
!1;a&&null!=this.validationExpression()&&(a=this.executeExpression(this.validationExpression()))}this.valid(a)};a.createFromTransferObject=function(b){var c;if(null!=b.options){var e,h,n,d;n=b.options;d=[];e=0;for(h=n.length;e<h;e++)c=n[e],d.push(mygps.model.FormOption.createFromTransferObject(c));c=d}return new a(b.id,b.label,b.type,b.value,b.values,c,b.readOnly,b.required,b.maximumLength,b.visibilityExpression,b.availabilityExpression,b.validationExpression)};a.toTransferObject=function(a){var c;
if(a.options()){var e,h,d,g;d=a.options();g=[];e=0;for(h=d.length;e<h;e++)c=d[e],g.push(mygps.model.FormOption.toTransferObject(c));c=g}return{id:a.id(),label:a.label(),type:a.type(),value:a.value(),values:a.values(),options:c,readOnly:a.readOnly(),required:a.required(),maximumLength:a.maximumLength(),visibilityExpression:a.visibilityExpression(),availabilityExpression:a.availabilityExpression(),validationExpression:a.validationExpression()}};return a}()});var d=namespace,w=function(a,b,c){var e;
this.id=ko.observable(a);this.label=ko.observable(b);this.questions=ko.observableArray(c);this.valid=ko.dependentObservable(this.evaluateValid,this);this.form=ko.observable(null);e=this.questions();b=0;for(c=e.length;b<c;b++)a=e[b],a.section(this)};w.prototype.evaluateValid=function(){return!_.any(this.questions(),function(a){return!a.valid()})};w.prototype.validate=function(){var a,b,c,e;e=this.questions();b=0;for(c=e.length;b<c;b++)a=e[b],a.validate()};w.createFromTransferObject=function(a){var b;
if(null!=a.questions){var c,e,h,d;h=a.questions;d=[];c=0;for(e=h.length;c<e;c++)b=h[c],d.push(mygps.model.FormQuestion.createFromTransferObject(b));b=d}return new w(a.id,a.label,b)};w.toTransferObject=function(a){var b;if(a.questions()){var c,e,h,d;h=a.questions();d=[];c=0;for(e=h.length;c<e;c++)b=h[c],d.push(mygps.model.FormQuestion.toTransferObject(b));b=d}return{id:a.id(),label:a.label(),questions:b}};d("mygps.model",{FormSection:w});var d=namespace,J=function(a,b,c,e,h,d,g,f){this.id=ko.observable(a);
this.firstName=ko.observable(b);this.lastName=ko.observable(c);this.phoneNumber=ko.observable(e);this.photoURL=ko.observable(d);this.coach=ko.observable(g);this.permissions=ko.observable(f)};J.createFromTransferObject=function(a){var b;null!=a.coach&&(b=mygps.model.Person.createFromTransferObject(a.coach));return new J(a.id,a.firstName,a.lastName,a.phoneNumber,a.emailAddress,a.photoURL,b,a.permissions)};d("mygps.model",{Person:J});var d=namespace,D=function(a,b,c){this.id=ko.observable(a);this.name=
ko.observable(b);this.description=ko.observable(c)};D.createFromTransferObject=function(a){return new D(a.id,a.name,a.description)};d("mygps.model",{SelfHelpGuide:D});var d=namespace,z=function(a,b,c,e,h){z.__super__.constructor.call(this,a,b,c);this.introductoryText=ko.observable(e);this.questions=ko.observableArray(h)};m(z,D);z.createFromTransferObject=function(a){var b;if(null!=a.questions){var c,e,h,d;h=a.questions;d=[];c=0;for(e=h.length;c<e;c++)b=h[c],d.push(mygps.model.SelfHelpGuideQuestion.createFromTransferObject(b));
b=d}return new z(a.id,a.name,a.description,a.introductoryText,b)};d("mygps.model",{SelfHelpGuideContent:z});var d=namespace,K=function(a,b,c,e,h){this.id=ko.observable(a);this.headingText=ko.observable(b);this.descriptionText=ko.observable(c);this.questionText=ko.observable(e);this.mandatory=ko.observable(h);this.response=ko.observable(null)};K.createFromTransferObject=function(a){return new K(a.id,a.headingText,a.challenge.selfHelpGuideDescription,a.challenge.selfHelpGuideQuestion,a.mandatory)};
d("mygps.model",{SelfHelpGuideQuestion:K});var d=namespace,L=function(a,b,c,e){this.id=ko.observable(a);this.summaryText=ko.observable(b);this.challengesIdentified=ko.observable(c);this.triggeredEarlyAlert=ko.observable(e)};L.createFromTransferObject=function(a){var b;if(null!=a.challengesIdentified){var c,e,h,d;h=a.challengesIdentified;d=[];c=0;for(e=h.length;c<e;c++)b=h[c],d.push(mygps.model.Challenge.createFromTransferObject(b));b=d}return new L(a.id,a.summaryText,b,a.triggeredEarlyAlert)};d("mygps.model",
{SelfHelpGuideResponse:L});var d=namespace,M=function(a,b,c,e,h,d,g,f,j,k,l){this.id=ko.observable(a);this.type=ko.observable(b);this.name=ko.observable(c);this.description=ko.observable(e);this.details=ko.observable(d);this.dueDate=ko.observable(g);this.completed=ko.observable(f);this.link=ko.observable(h);this.deletable=ko.observable(j);this.challengeId=ko.observable(k);this.challengeReferralId=ko.observable(l)};M.createFromTransferObject=function(a){var b=a.id,c=a.type,e=a.name,h=a.description,
d=a.htmlLink,g=a.details,f;f=a.dueDate;null!=f?(f=new Date(f),f.setTime(f.getTime()+6E4*f.getTimezoneOffset())):f=null;return new M(b,c,e,h,d,g,f,a.completed,a.deletable,a.challengeId,a.challengeReferralId)};d("mygps.model",{Task:M});namespace("mygps.session",{Session:function(a){var b=this;this.sessionService=a;this.authenticatedPerson=ko.observable(null);this.initialized=ko.observable(!1);this.sessionService.getAuthenticatedPerson({result:function(a){b.authenticatedPerson(a);return b.initialized(!0)},
fault:function(a){alert(a.responseText);return b.initialized(!0)}})}});var d=namespace,p=function(a){this.baseURL=a};p.prototype.createURL=function(a){var b;return"/ssp/MyGPS/"+(""+(null!=(b=this.baseURL)?b:"")+a)};d("mygps.service",{AbstractService:p});var d=namespace,A=function(a){A.__super__.constructor.call(this,a)};m(A,mygps.service.AbstractService);A.prototype.getByChallengeId=function(a,b){return j.ajax({url:this.createURL("/getByChallengeId?challengeId="+a),dataType:"json",success:function(a){var e,
h,d,f;f=[];h=0;for(d=a.length;h<d;h++)e=a[h],f.push(mygps.model.ChallengeReferral.createFromTransferObject(e));return null!=b?"function"===typeof b.result?b.result(f):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};A.prototype.search=function(a,b,c){return j.ajax({url:this.createURL("/search?challengeId="+a+"&query="+b),dataType:"json",success:function(a){var b,d,f,g;g=[];d=0;for(f=a.length;d<f;d++)b=a[d],g.push(mygps.model.ChallengeReferral.createFromTransferObject(b));
return null!=c?"function"===typeof c.result?c.result(g):void 0:void 0},error:function(a){return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};d("mygps.service",{ChallengeReferralService:A});var d=namespace,E=function(a){E.__super__.constructor.call(this,a)};m(E,mygps.service.AbstractService);E.prototype.search=function(a,b){return j.ajax({url:this.createURL("/search?query="+a),dataType:"json",success:function(a){var e,d,f,g;g=[];d=0;for(f=a.length;d<f;d++)e=a[d],g.push(mygps.model.Challenge.createFromTransferObject(e));
return null!=b?"function"===typeof b.result?b.result(g):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};d("mygps.service",{ChallengeService:E});var d=namespace,F=function(a){F.__super__.constructor.call(this,a)};m(F,mygps.service.AbstractService);F.prototype.contactCoach=function(a,b,c){return j.ajax({url:this.createURL(""),type:"POST",data:JSON.stringify({subject:a,message:b}),contentType:"application/json",success:function(a){return null!=
c?"function"===typeof c.result?c.result(a):void 0:void 0},error:function(a){return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};d("mygps.service",{MessageService:F});var d=namespace,t=function(a){t.__super__.constructor.call(this,a)};m(t,mygps.service.AbstractService);t.prototype.cancel=function(a,b){return j.ajax({url:this.createURL("/cancel?selfHelpGuideResponseId="+a),dataType:"json",type:"PUT",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:
void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};t.prototype.complete=function(a,b){return j.ajax({url:this.createURL("/complete?selfHelpGuideResponseId="+a),type:"POST",dataType:"json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};t.prototype.getById=function(a,b){return j.ajax({url:this.createURL("/getById?selfHelpGuideResponseId="+
a),dataType:"json",success:function(a){a=mygps.model.SelfHelpGuideResponse.createFromTransferObject(a);return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};t.prototype.initiate=function(a,b){return j.ajax({url:this.createURL("/initiate?selfHelpGuideId="+a),type:"POST",dataType:"text",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=
b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};t.prototype.answer=function(a,b,c,e){return j.ajax({url:this.createURL("/answer?selfHelpGuideResponseId="+a+"&selfHelpGuideQuestionId="+b+"&response="+c),type:"POST",dataType:"json",success:function(a){return null!=e?"function"===typeof e.result?e.result(a):void 0:void 0},error:function(a){return null!=e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};d("mygps.service",{SelfHelpGuideResponseService:t});var d=namespace,x=function(a){x.__super__.constructor.call(this,
a)};m(x,mygps.service.AbstractService);x.prototype.getAll=function(a){return j.ajax({url:this.createURL("/getAll"),dataType:"json",success:function(b){var c,e,d,f;f=[];e=0;for(d=b.length;e<d;e++)c=b[e],f.push(mygps.model.SelfHelpGuide.createFromTransferObject(c));return null!=a?"function"===typeof a.result?a.result(f):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};x.prototype.getBySelfHelpGuideGroup=function(a,b){return j.ajax({url:this.createURL("/getBySelfHelpGuideGroup?selfHelpGuideGroupId="+
a),dataType:"json",success:function(a){var e,d,f,g;g=[];d=0;for(f=a.length;d<f;d++)e=a[d],g.push(mygps.model.SelfHelpGuide.createFromTransferObject(e));return null!=b?"function"===typeof b.result?b.result(g):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};x.prototype.getContentById=function(a,b){return j.ajax({url:this.createURL("/getContentById?selfHelpGuideId="+a),dataType:"json",success:function(a){a=mygps.model.SelfHelpGuideContent.createFromTransferObject(a);
return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};d("mygps.service",{SelfHelpGuideService:x});var d=namespace,G=function(a){G.__super__.constructor.call(this,a)};m(G,mygps.service.AbstractService);G.prototype.getAuthenticatedPerson=function(a){return j.ajax({url:this.createURL("/getAuthenticatedPerson"),dataType:"json",success:function(b){b=b?mygps.model.Person.createFromTransferObject(b):
null;return null!=a?"function"===typeof a.result?a.result(b):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};d("mygps.service",{SessionService:G});var d=namespace,B=function(a){B.__super__.constructor.call(this,a)};m(B,mygps.service.AbstractService);B.prototype.getForm=function(a){return j.ajax({url:this.createURL("/getForm"),dataType:"json",success:function(b){b=mygps.model.Form.createFromTransferObject(b);return null!=a?"function"===typeof a.result?
a.result(b):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};B.prototype.saveForm=function(a,b){return j.ajax({url:this.createURL("/"),type:"POST",data:JSON.stringify(mygps.model.Form.toTransferObject(a)),contentType:"application/json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};d("mygps.service",{StudentIntakeService:B});
var d=namespace,s=function(a){s.__super__.constructor.call(this,a)};m(s,mygps.service.AbstractService);s.prototype.createCustom=function(a,b,c){return j.ajax({url:this.createURL("/createCustom?name="+encodeURIComponent(a)+"&description="+encodeURIComponent(b)),dataType:"json",type:"POST",success:function(a){a=mygps.model.Task.createFromTransferObject(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},error:function(a){return null!=c?"function"===typeof c.fault?c.fault(a):void 0:
void 0}})};s.prototype.createForChallengeReferral=function(a,b,c){return j.ajax({url:this.createURL("/createForChallengeReferral?challengeId="+a+"&challengeReferralId="+b),dataType:"json",type:"POST",success:function(a){a=mygps.model.Task.createFromTransferObject(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},error:function(a){return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};s.prototype["delete"]=function(a,b){return j.ajax({url:this.createURL("/delete?taskId="+
a),dataType:"json",type:"DELETE",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};s.prototype.email=function(a,b){return j.ajax({url:this.createURL("/email?emailAddress="+a),dataType:"json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};
s.prototype.getAll=function(a){return j.ajax({url:this.createURL("/getAll"),dataType:"json",success:function(b){var c,e,d,f;f=[];e=0;for(d=b.length;e<d;e++)c=b[e],f.push(mygps.model.Task.createFromTransferObject(c));return null!=a?"function"===typeof a.result?a.result(f):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};s.prototype.mark=function(a,b,c){return j.ajax({url:this.createURL("/mark?taskId="+a+"&complete="+b),dataType:"json",type:"PUT",
success:function(a){a=mygps.model.Task.createFromTransferObject(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},error:function(a){return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};s.prototype.print=function(){window.open(this.createURL("/print"));return result(!0)};d("mygps.service",{TaskService:s});d=namespace;p=function(a){this.session=a;this.authenticated=ko.dependentObservable(this.evaluateAuthenticated,this);this.authenticatedPersonName=ko.dependentObservable(this.authenticatedPersonName,
this);this.isnonstudent=ko.dependentObservable(this.evaluateNonStudentPermission,this);this.appName=ko.observable(null)};p.APP_NAME_API_URL="/ssp/api/1/mygps/home/appname";p.prototype.load=function(){this.loadAppName(this.appName)};p.prototype.evaluateAuthenticated=function(){var a;return null!=(null!=(a=this.session)?a.authenticatedPerson():void 0)};p.prototype.evaluateNonStudentPermission=function(){var a,b;a=null!=(b=this.session)?b.authenticatedPerson():void 0;return null!=a&&null!=a.permissions()&&
(a=a.permissions(),-1!==a.indexOf("ROLE_PERSON_READ")||-1!==a.indexOf("ROLE_PERSON_FILTER"))?!0:!1};p.prototype.authenticatedPersonName=function(){var a,b;a=null!=(b=this.session)?b.authenticatedPerson():void 0;return null!=a?""+a.firstName()+" "+a.lastName():null};p.prototype.loadAppName=function(a){return j.ajax({type:"GET",url:this.constructor.APP_NAME_API_URL,success:function(b){return null!==b&&""!==b.replace(/^\s+|\s+$/g,"")?a("Back to "+b):a("Back to SSP")},error:function(){return a("Back to SSP")}})};
d("mygps.viewmodel",{AbstractSessionViewModel:p});var d=namespace,l=function(a,b){l.__super__.constructor.call(this,a);this.taskService=b;this.tasks=ko.observableArray([]);this.taskFilters=ko.observableArray(mygps.enumeration.TaskFilter.enumerators());this.selectedTaskFilter=ko.observable(mygps.enumeration.TaskFilter.ACTIVE);this.filteredTasks=ko.dependentObservable(this.filterTasks,this);this.printingTasks=ko.observable(!1);this.emailingTasks=ko.observable(!1)};m(l,mygps.viewmodel.AbstractSessionViewModel);
l.prototype.load=function(){l.__super__.load.call(this);this.loadAllTasks()};l.prototype.formatDate=function(a){var b;return null!=a?(b=new Date,a.getFullYear()===b.getFullYear()?""+(a.getMonth()+1)+"/"+a.getDate():""+(a.getMonth()+1)+"/"+a.getDate()+"/"+(""+a.getFullYear()).substring(2)):""};l.prototype.filterTasks=function(){return _.select(this.tasks(),this.selectedTaskFilter().filterFunction)};l.prototype.loadAllTasks=function(){var a=this;this.taskService.getAll({result:function(b){return a.tasks(b)},
fault:function(a){return alert(a.responseText)}})};l.prototype.selectTaskFilter=function(a){this.selectedTaskFilter(a)};l.prototype.createCustomTask=function(a,b,c){var e=this;this.taskService.createCustom(a,b,{result:function(a){e.tasks.push(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){alert(a.responseText);return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};l.prototype.createTaskForChallengeReferral=function(a,b){var c=this;this.taskService.createForChallengeReferral(a.id(),
b.id(),{result:function(a){return c.tasks.push(a)},fault:function(a){return alert(a.responseText)}})};l.prototype.createTaskForChallengeReferral=function(a,b,c){var e=this;this.taskService.createForChallengeReferral(a.id(),b.id(),{result:function(a){e.tasks.push(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){alert(a.responseText);return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};l.prototype.markTask=function(a,b){this.taskService.mark(a.id(),
b,{result:function(){return a.completed(b)},fault:function(a){return alert(a.responseText)}})};l.prototype.deleteTask=function(a){var b=this;this.taskService["delete"](a.id(),{result:function(){return b.tasks.remove(a)},fault:function(a){return alert(a.responseText)}})};l.prototype.deleteTask=function(a,b){var c=this;this.taskService["delete"](a.id(),{result:function(e){c.tasks.remove(a);return null!=b?"function"===typeof b.result?b.result(e):void 0:void 0},fault:function(a){alert(a.responseText);
return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};l.prototype.printTasks=function(){var a=this;this.printingTasks(!0);this.taskService.print({result:function(){return a.printingTasks(!1)},fault:function(b){alert(b.responseText);return a.printingTasks(!1)}})};l.prototype.emailTasks=function(a){var b=this;this.emailingTasks(!0);this.taskService.email(a,{result:function(){return b.emailingTasks(!1)},fault:function(){alert(fault.responseText);return b.emailingTasks(!1)}})};l.prototype.collectEmailAddress=
function(){var a=this;apprise("E-mail address:",{input:!0,validation:function(a){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a)||""===a?"true":"invalid email address"}},function(b){if(b)return a.emailTasks(b)})};d("mygps.viewmodel",{AbstractTasksViewModel:l});var d=namespace,k=function(a,b,c,e){k.__super__.constructor.call(this,a,b);this.challengeService=c;this.challengeReferralService=e;this.query=ko.observable(null);this.challenges=ko.observableArray();this.selectedChallenge=ko.observable(null);
this.selectedChallengeName=ko.dependentObservable(this.evaluateSelectedChallengeName,this);this.referrals=ko.dependentObservable(this.evaluateReferrals,this);this.filteredReferrals=ko.dependentObservable(this.filterReferrals,this);this.allowCustomTaskCreation=ko.observable(!1)};m(k,mygps.viewmodel.AbstractTasksViewModel);k.prototype.evaluateReferrals=function(){var a;return(null!=(a=this.selectedChallenge())?a.challengeReferrals():void 0)||[]};k.prototype.evaluateSelectedChallengeName=function(){var a;
return null!=(a=this.selectedChallenge())?a.name():void 0};k.prototype.filterReferrals=function(){var a=this;return _.select(this.referrals(),function(b){return!_.any(a.tasks(),function(a){return a.challengeReferralId()===b.id()&&!a.completed()})})};k.prototype.load=function(a){null==a&&(a="");k.__super__.load.call(this);this.search(a)};k.prototype.createTaskForChallengeReferral=function(a,b){var c=this;k.__super__.createTaskForChallengeReferral.call(this,a,b,{result:function(){return c.refresh()},
fault:function(a){return alert(a.responseText)}})};k.prototype.markTask=function(a,b){k.__super__.markTask.call(this,a,b);this.refresh()};k.prototype.deleteTask=function(a){var b=this;k.__super__.deleteTask.call(this,a,{result:function(){return b.refresh()},fault:function(a){return alert(a.responseText)}})};k.prototype.search=function(a){this.query(a);this.reset();null!=a&&this.searchChallenges(a)};k.prototype.refresh=function(){return this.searchChallenges(this.query())};k.prototype.reset=function(){this.challenges.removeAll();
return this.selectedChallenge(null)};k.prototype.selectChallenge=function(a){this.selectedChallenge(a);if(null!=this.selectedChallenge()&&0<this.selectedChallenge().referralCount()&&0===this.selectedChallenge().challengeReferrals().length)return this.searchChallengeReferrals(this.selectedChallenge(),this.query())};k.prototype.searchChallenges=function(a){var b=this;this.challengeService.search(a,{result:function(a){b.challenges(a);return b.allowCustomTaskCreation(0===b.challenges().length)},fault:function(a){return alert(a.responseText)}})};
k.prototype.searchChallengeReferrals=function(a,b){return this.challengeReferralService.search(a.id(),b,{result:function(b){return a.challengeReferrals(b)},fault:function(a){return alert(a.responseText)}})};d("mygps.viewmodel",{ChallengeReferralSearchViewModel:k});var d=namespace,u=function(a,b){u.__super__.constructor.call(this,a);this.messageService=b;this.subject=ko.observable(null);this.message=ko.observable(null);this.contactingCoach=ko.observable(!1);this.coachName=ko.dependentObservable(this.coachName,
this)};m(u,mygps.viewmodel.AbstractSessionViewModel);u.prototype.load=function(){u.__super__.load.call(this)};u.prototype.coachName=function(){var a;a=this.session.authenticatedPerson().coach();return null!=a?""+a.firstName()+" "+a.lastName():null};u.prototype.contactCoach=function(a,b,c){var d=this;this.contactingCoach(!0);this.messageService.contactCoach(a,b,{result:function(a){d.contactingCoach(!1);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){-1!==a.responseText.indexOf("org.hibernate.exception.ConstraintViolationException")?
alert("You must provide a Subject and a Message before it can be sent to your coach."):alert(a.responseText);d.contactingCoach(!1);return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};d("mygps.viewmodel",{ContactViewModel:u});var d=namespace,f=function(a,b){f.__super__.constructor.call(this,a,b);this.personId=ko.dependentObservable(this.evaluatePersonId,this);this.welcomeMessage=ko.observable(null);this.toolsList=ko.observableArray([]);this.showSelfHelpGuides=ko.dependentObservable(this.evaluateShowSelfHelpGuides,
this);this.showContactCoach=ko.dependentObservable(this.evaluateShowContactCoach,this);this.showResources=ko.dependentObservable(this.evaluateShowResources,this);this.mapToolEnabled=ko.dependentObservable(this.evaluateMapToolEnabled,this);this.mapLoadAttempted=ko.observable(!1);this.currentMapExists=ko.observable(!1);this.showMap=ko.dependentObservable(this.evaluateShowMap,this);this.showAnyTools=ko.dependentObservable(this.evaluateShowAnyTools,this);this.mapPrintUrl=this.constructor.MAP_PRINT_CURRENT_API_URL};
m(f,mygps.viewmodel.AbstractTasksViewModel);f.CONTACT_COACH_TOOL="CONTACT_COACH";f.SELF_HELP_GUIDE_TOOL="SELF_HELP_GUIDES";f.RESOURCES_TOOL="SEARCH";f.MAP_TOOL="MAP";f.TOOLS=[f.CONTACT_COACH_TOOL,f.SELF_HELP_GUIDE_TOOL,f.RESOURCES_TOOL,f.MAP_TOOL];f.MAP_PRINT_CURRENT_API_URL="/ssp/api/1/mygps/plan/print";f.MAP_CURRENT_API_URL="/ssp/api/1/mygps/plan/current";f.WELCOME_MESSAGE_API_URL="/ssp/api/1/mygps/home/welcome";f.TOOLS_LIST_API_URL="/ssp/api/1/mygps/home/tools";f.prototype.load=function(){f.__super__.load.call(this);
this.loadContent()};f.prototype.isToolEnabled=function(a){return-1!==this.toolsList().indexOf(a.toUpperCase())};f.prototype.evaluateShowAnyTools=function(){return this.showContactCoach()||this.showSelfHelpGuides()||this.showResources()||this.showMap()};f.prototype.evaluateShowContactCoach=function(){var a,b;return null!=(null!=(a=this.session)?null!=(b=a.authenticatedPerson())?b.coach():void 0:void 0)&&this.isToolEnabled(this.constructor.CONTACT_COACH_TOOL)};f.prototype.evaluatePersonId=function(){var a,
b;return null!=(a=this.session)?null!=(b=a.authenticatedPerson())?b.id():void 0:void 0};f.prototype.evaluateMapToolEnabled=function(){return this.isToolEnabled(this.constructor.MAP_TOOL)};f.prototype.evaluateShowMap=function(){!0===this.mapToolEnabled()&&!0!==this.currentMapExists()&&this.loadMapExistenceOnce(this.currentMapExists);return this.currentMapExists()};f.prototype.evaluateShowSelfHelpGuides=function(){return this.isToolEnabled(this.constructor.SELF_HELP_GUIDE_TOOL)};f.prototype.evaluateShowResources=
function(){return this.isToolEnabled(this.constructor.RESOURCES_TOOL)};f.prototype.loadMapExistenceOnce=function(a){var b;if(null!=(b=this.session)&&b.initialized()&&null!=this.personId()&&!0!==this.mapLoadAttempted())return this.mapLoadAttempted(!0),j.ajax({type:"GET",url:this.constructor.MAP_CURRENT_API_URL,dataType:"json",success:function(b){return null!==b&&b!=={}&&b!==[]?a(!0):a(!1)},error:function(){return a(!1)}})};f.prototype.loadWelcomeMessage=function(a){return j.ajax({type:"GET",url:this.constructor.WELCOME_MESSAGE_API_URL,
success:function(b){return null!==b?(b=b.replace(/^\s+|\s+$/g,""),a(""===b?null:b)):a("<h2>Welcome</h2> \n<p>This self help tool will assist you in identifying and overcoming challenges or barriers to your success at this college. Please use the Self Help Guides to begin the process of identifying the challenges you might face, and discovering the solutions available to meet those challenges. The tool will assist you in building a Personal Road Map that will guide you on your journey to success. Good luck on that journey!</p> \n")},
error:function(){return a("<h2>Welcome</h2> \n<p>This self help tool will assist you in identifying and overcoming challenges or barriers to your success at this college. Please use the Self Help Guides to begin the process of identifying the challenges you might face, and discovering the solutions available to meet those challenges. The tool will assist you in building a Personal Road Map that will guide you on your journey to success. Good luck on that journey!</p> \n")}})};f.prototype.loadToolsList=
function(a){return j.ajax({type:"GET",url:this.constructor.TOOLS_LIST_API_URL,success:function(b){if(null!==b){b=b.replace(/^\s+|\s+$/g,"");if(""!==b){var c,d,f,g;f=b.split(",");g=[];c=0;for(d=f.length;c<d;c++)b=f[c],g.push(b.trim().toUpperCase());b=a(g)}else b=a([]);return b}return a([])},error:function(){return a([])}})};f.prototype.resetContent=function(){this.toolsList([]);this.welcomeMessage(null);this.welcomeMessage(null);this.mapLoadAttempted(!1);return this.currentMapExists(!1)};f.prototype.loadContent=
function(){this.resetContent();this.loadWelcomeMessage(this.welcomeMessage);this.loadToolsList(this.toolsList)};ko.bindingHandlers.popupWindow={init:function(a,b){var c;c=ko.utils.unwrapObservable(b());j(a).click(function(){return window.open(ko.utils.unwrapObservable(c.url),"ChildWindow"," height="+c.height+", width="+c.width+", resizable=1, scrollbars=1")});return!1}};d("mygps.viewmodel",{HomeViewModel:f});d=namespace;p=function(){};p.prototype.load=function(){};d("mygps.viewmodel",{LoginViewModel:p});
var d=namespace,y=function(a,b){y.__super__.constructor.call(this,a);this.selfHelpGuideService=b;this.selfHelpGuides=ko.observableArray()};m(y,mygps.viewmodel.AbstractSessionViewModel);y.prototype.load=function(a){null==a&&(a=null);y.__super__.load.call(this);this.loadSelfHelpGuides(a)};y.prototype.loadSelfHelpGuides=function(a){var b=this;null==a&&(a=null);null!=a?this.selfHelpGuideService.getBySelfHelpGuideGroup(a,{result:function(a){return b.selfHelpGuides(a)},fault:function(a){return alert(a.responseText)}}):
this.selfHelpGuideService.getAll({result:function(a){return b.selfHelpGuides(a)},fault:function(a){return alert(a.responseText)}})};d("mygps.viewmodel",{SelfHelpGuidesViewModel:y});var d=namespace,g=function(a,b,c,d,f){g.__super__.constructor.call(this,a,b);this.selfHelpGuideService=c;this.selfHelpGuideResponseService=d;this.challengeReferralService=f;this.selfHelpGuideContent=ko.observable(null);this.selfHelpGuideResponseId=ko.observable(null);this.selfHelpGuideResponse=ko.observable(null);this.name=
ko.dependentObservable(this.evaluateName,this);this.introductoryText=ko.dependentObservable(this.evaluateIntroductoryText,this);this.currentQuestionIndex=ko.observable(0);this.currentQuestion=ko.dependentObservable(this.evaluateCurrentQuestion,this);this.hasPreviousQuestion=ko.dependentObservable(this.evaluateHasPreviousQuestion,this);this.hasNextQuestion=ko.dependentObservable(this.evaluateHasNextQuestion,this);this.canSkipQuestion=ko.dependentObservable(this.evaluateCanSkipQuestion,this);this.progressText=
ko.dependentObservable(this.evaluateProgressText,this);this.challenges=ko.dependentObservable(this.evaluateChallenges,this);this.selectedChallenge=ko.observable(null);this.selectedChallengeName=ko.dependentObservable(this.evaluateSelectedChallengeName,this);this.referrals=ko.dependentObservable(this.evaluateReferrals,this);this.filteredReferrals=ko.dependentObservable(this.filterReferrals,this);this.summaryText=ko.dependentObservable(this.evaluateSummaryText,this)};m(g,mygps.viewmodel.AbstractTasksViewModel);
g.prototype.load=function(a){g.__super__.load.call(this);this.initiateSelfHelpGuideResponse(a)};g.prototype.createTaskForChallengeReferral=function(a,b){var c=this;g.__super__.createTaskForChallengeReferral.call(this,a,b,{result:function(){return c.refresh()},fault:function(a){return alert(a.responseText)}})};g.prototype.markTask=function(a,b){g.__super__.markTask.call(this,a,b);this.refresh()};g.prototype.deleteTask=function(a){g.__super__.deleteTask.call(this,a);this.refresh()};g.prototype.evaluateName=
function(){var a;return null!=(a=this.selfHelpGuideContent())?a.name():void 0};g.prototype.evaluateIntroductoryText=function(){var a;return null!=(a=this.selfHelpGuideContent())?a.introductoryText():void 0};g.prototype.evaluateCurrentQuestion=function(){var a,b;return null!=(a=this.selfHelpGuideContent())?null!=(b=a.questions())?b[this.currentQuestionIndex()]:void 0:void 0};g.prototype.evaluateHasPreviousQuestion=function(){return null!=this.selfHelpGuideContent()?0<this.currentQuestionIndex():!1};
g.prototype.evaluateHasNextQuestion=function(){return null!=this.selfHelpGuideContent()?this.currentQuestionIndex()<this.selfHelpGuideContent().questions().length-1:!1};g.prototype.evaluateCanSkipQuestion=function(){return null!=this.currentQuestion()?!this.currentQuestion().mandatory():!0};g.prototype.evaluateProgressText=function(){return null!=this.selfHelpGuideContent()?""+(this.currentQuestionIndex()+1)+" of "+this.selfHelpGuideContent().questions().length:""};g.prototype.evaluateChallenges=
function(){var a;return(null!=(a=this.selfHelpGuideResponse())?a.challengesIdentified():void 0)||[]};g.prototype.evaluateSelectedChallengeName=function(){var a;return null!=(a=this.selectedChallenge())?a.name():void 0};g.prototype.evaluateReferrals=function(){var a;return(null!=(a=this.selectedChallenge())?a.challengeReferrals():void 0)||[]};g.prototype.evaluateSummaryText=function(){var a;return null!=(a=this.selfHelpGuideResponse())?a.summaryText():void 0};g.prototype.filterReferrals=function(){var a=
this;return _.select(this.referrals(),function(b){return!_.any(a.tasks(),function(a){return a.challengeReferralId()===b.id()&&!a.completed()})})};g.prototype.loadSelfHelpGuideContent=function(a){var b=this;this.selfHelpGuideService.getContentById(a,{result:function(a){return b.selfHelpGuideContent(a)},fault:function(a){return alert(a.responseText)}})};g.prototype.initiateSelfHelpGuideResponse=function(a){var b=this;this.selfHelpGuideResponseService.initiate(a,{result:function(c){b.selfHelpGuideResponseId(c);
return b.loadSelfHelpGuideContent(a)},fault:function(a){return alert(a.responseText)}})};g.prototype.answerQuestion=function(a,b){var c=this;this.selfHelpGuideResponseService.answer(this.selfHelpGuideResponseId(),a.id(),b,{result:function(){a.response(b);return c.moveToNextQuestion()},fault:function(a){return alert(a.responseText)}})};g.prototype.skipToNextQuestion=function(){if(!this.currentQuestion().mandatory())return this.moveToNextQuestion()};g.prototype.moveToPreviousQuestion=function(){this.hasPreviousQuestion()&&
this.currentQuestionIndex(this.currentQuestionIndex()-1)};g.prototype.moveToNextQuestion=function(){this.hasNextQuestion()?this.currentQuestionIndex(this.currentQuestionIndex()+1):this.complete()};g.prototype.cancel=function(){var a=this;this.selfHelpGuideResponseService.cancel(this.selfHelpGuideResponse().id(),{result:function(){return a.selfHelpGuideResponse().cancelled(!0)},fault:function(a){return alert(a.responseText)}})};g.prototype.complete=function(){var a=this;this.selfHelpGuideResponseService.complete(this.selfHelpGuideResponseId(),
{result:function(){return a.selfHelpGuideResponseService.getById(a.selfHelpGuideResponseId(),{result:function(b){return a.selfHelpGuideResponse(b)},fault:function(a){return alert(a.responseText)}})},fault:function(a){return alert(a.responseText)}})};g.prototype.refresh=function(){var a=this;return this.selfHelpGuideResponseService.getById(this.selfHelpGuideResponseId(),{result:function(b){return a.selfHelpGuideResponse(b)},fault:function(a){return alert(a.responseText)}})};g.prototype.selectChallenge=
function(a){this.selectedChallenge(a);this.challengeReferralService.getByChallengeId(a.id(),{result:function(b){return a.challengeReferrals(b)},fault:function(a){return alert(a.responseText)}})};d("mygps.viewmodel",{SelfHelpGuideViewModel:g});var d=namespace,q=function(a,b){q.__super__.constructor.call(this,a);this.studentIntakeService=b;this.form=ko.observable(null);this.savingForm=ko.observable(!1);this.invalid=ko.observable(!1);this.currentSectionIndex=ko.observable(0);this.currentSection=ko.dependentObservable(this.evaluateCurrentSection,
this);this.hasPreviousSection=ko.dependentObservable(this.evaluateHasPreviousSection,this);this.hasNextSection=ko.dependentObservable(this.evaluateHasNextSection,this);this.completed=ko.dependentObservable(this.evaluateCompleted,this)};m(q,mygps.viewmodel.AbstractSessionViewModel);q.prototype.load=function(){q.__super__.load.call(this);this.loadForm()};q.prototype.evaluateCurrentSection=function(){var a,b;return null!=(a=this.form())?null!=(b=a.sections())?b[this.currentSectionIndex()]:void 0:void 0};
q.prototype.evaluateCompleted=function(){var a;return null!=(a=this.form())?a.completed():void 0};q.prototype.evaluateHasPreviousSection=function(){return null!=this.form()?0<this.currentSectionIndex():!1};q.prototype.evaluateHasNextSection=function(){return null!=this.form()?this.currentSectionIndex()<this.form().sections().length-1:!1};q.prototype.loadForm=function(){var a=this;this.studentIntakeService.getForm({result:function(b){return a.form(b)},fault:function(a){var c,d;return alert(null!=(c=
null!=(d=j.parseJSON(a.responseText))?d.message:void 0)?c:a.responseText)}})};q.prototype.saveForm=function(a){var b=this;this.currentSection().validate();this.currentSection().valid()?(this.invalid(!1),this.savingForm(!0),this.studentIntakeService.saveForm(this.form(),{result:function(c){b.savingForm(!1);return null!=a?"function"===typeof a.result?a.result(c):void 0:void 0},fault:function(c){b.savingForm(!1);alert("There was an error with your submission.  Please contact the system Administrator");
return null!=a?"function"===typeof a.fault?a.fault(c):void 0:void 0}})):this.invalid(!0)};q.prototype.moveToPreviousSection=function(){return this.hasPreviousSection()?(this.currentSectionIndex(this.currentSectionIndex()-1),this.invalid(!1),!0):!1};q.prototype.moveToNextSection=function(){if(this.hasNextSection()){this.currentSection().validate();if(this.currentSection().valid())return this.invalid(!1),this.currentSectionIndex(this.currentSectionIndex()+1),!0;this.invalid(!0)}return!1};d("mygps.viewmodel",
{StudentIntakeViewModel:q})}).call(this);
