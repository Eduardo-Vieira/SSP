(function(){var l={}.hasOwnProperty,g=function(c,b){function a(){this.constructor=c}for(var d in b)l.call(b,d)&&(c[d]=b[d]);a.prototype=b.prototype;c.prototype=new a;c.__super__=b.prototype;return c};(function(){return namespace("mygps.enumeration",{TaskFilter:function(){function c(b,a){this.name=b;this.filterFunction=a}c.name="TaskFilter";c.COMPLETED=new c("Completed",function(b){return b.completed()});c.ALL=new c("All",function(){return!0});c.ACTIVE=new c("Active",function(b){return!b.completed()});
c.enumerators=function(){return[c.ALL,c.ACTIVE,c.COMPLETED]};return c}()})})(jQuery);(function(){return namespace("mygps.model",{Challenge:function(){function c(b,a,d,f){this.id=ko.observable(b);this.name=ko.observable(a);this.description=ko.observable(d);this.referralCount=ko.observable(f);this.challengeReferrals=ko.observableArray()}c.name="Challenge";c.createFromTransferObject=function(b){return new c(b.id,b.name,b.description,b.referralCount)};return c}()})})(jQuery);(function(){return namespace("mygps.model",
{ChallengeReferral:function(){function c(b,a,d,f){this.id=ko.observable(b);this.name=ko.observable(a);this.description=ko.observable(d);this.details=ko.observable(f)}c.name="ChallengeReferral";c.createFromTransferObject=function(b){return new c(b.id,b.name,b.description,b.details)};return c}()})})(jQuery);(function(){return namespace("mygps.model",{Form:function(){function c(b,a,d){var f;this.id=ko.observable(b);this.label=ko.observable(a);this.sections=ko.observableArray(d);this.valid=ko.dependentObservable(this.evaluateValid,
this);f=this.sections();a=0;for(d=f.length;a<d;a++)b=f[a],b.form(this)}c.name="Form";c.prototype.evaluateValid=function(){return!_.any(this.sections(),function(b){return!b.valid()})};c.prototype.validate=function(){var b,a,d,f;f=this.sections();a=0;for(d=f.length;a<d;a++)b=f[a],b.validate()};c.createFromTransferObject=function(b){var a;if(null!=b.sections){var d,f,e,h;e=b.sections;h=[];d=0;for(f=e.length;d<f;d++)a=e[d],h.push(mygps.model.FormSection.createFromTransferObject(a));a=h}return new c(b.id,
b.label,a)};c.toTransferObject=function(b){var a;if(b.sections()){var d,f,e,c;e=b.sections();c=[];d=0;for(f=e.length;d<f;d++)a=e[d],c.push(mygps.model.FormSection.toTransferObject(a));a=c}return{id:b.id(),label:b.label(),sections:a}};return c}()})})(jQuery);(function(){return namespace("mygps.model",{FormOption:function(){function c(b,a,d){this.id=ko.observable(b);this.label=ko.observable(a);this.value=ko.observable(d)}c.name="FormOption";c.createFromTransferObject=function(b){return new c(b.id,b.label,
b.value)};c.toTransferObject=function(b){return{id:b.id(),label:b.label(),value:b.value()}};return c}()})})(jQuery);(function(){return namespace("mygps.model",{FormQuestion:function(){function c(b,a,d,f,e,c,j,i,k,g,l,n){this.id=ko.observable(b);this.label=ko.observable(a);this.type=ko.observable(d);this.value=ko.observable(f);this.values=ko.observableArray(e||[]);this.options=ko.observableArray(c||[]);this.readOnly=ko.observable(j);this.required=ko.observable(i);this.maximumLength=ko.observable(k);
this.visibilityExpression=ko.observable(g);this.availabilityExpression=ko.observable(l);this.validationExpression=ko.observable(n);this.labelWithIndicator=ko.observable(i?a+" *":a);this.section=ko.observable(null);this.valid=ko.observable(!0);this.enabled=ko.dependentObservable(this.evaluateEnabled,this);this.visible=ko.dependentObservable(this.evaluateVisible,this)}c.name="FormQuestion";c.prototype.evaluateEnabled=function(){return this.readOnly()?!1:null!=this.availabilityExpression()?this.executeExpression(this.availabilityExpression()):
!0};c.prototype.evaluateVisible=function(){return null!=this.visibilityExpression()?this.executeExpression(this.visibilityExpression()):!0};c.prototype.executeExpression=function(b){var a=this;window.getQuestionById=function(b){var f;return _.detect(null!=(f=a.section())?f.questions():void 0,function(a){return a.id()===b})};window.hasValueForQuestionId=function(a,b){var e;e=getQuestionById(b);return null!=e?"checklist"===e.type()?_.include(e.values(),a):e.value()===a:!1};window.hasValue=function(b){return a.value()===
b};window.isChecked=function(){return a.value()?!0:!1};return eval(b)};c.prototype.validate=function(){var b;b=!0;if(this.enabled()&&this.visible()){if(this.required()&&(null===this.value()||""===this.value()))b=!1;b&&null!=this.validationExpression()&&(b=this.executeExpression(this.validationExpression()))}this.valid(b)};c.createFromTransferObject=function(b){var a;if(null!=b.options){var d,f,e,h;e=b.options;h=[];d=0;for(f=e.length;d<f;d++)a=e[d],h.push(mygps.model.FormOption.createFromTransferObject(a));
a=h}return new c(b.id,b.label,b.type,b.value,b.values,a,b.readOnly,b.required,b.maximumLength,b.visibilityExpression,b.availabilityExpression,b.validationExpression)};c.toTransferObject=function(b){var a;if(b.options()){var d,f,e,c;e=b.options();c=[];d=0;for(f=e.length;d<f;d++)a=e[d],c.push(mygps.model.FormOption.toTransferObject(a));a=c}return{id:b.id(),label:b.label(),type:b.type(),value:b.value(),values:b.values(),options:a,readOnly:b.readOnly(),required:b.required(),maximumLength:b.maximumLength(),
visibilityExpression:b.visibilityExpression(),availabilityExpression:b.availabilityExpression(),validationExpression:b.validationExpression()}};return c}()})})(jQuery);(function(){return namespace("mygps.model",{FormSection:function(){function c(b,a,d){var f;this.id=ko.observable(b);this.label=ko.observable(a);this.questions=ko.observableArray(d);this.valid=ko.dependentObservable(this.evaluateValid,this);this.form=ko.observable(null);f=this.questions();a=0;for(d=f.length;a<d;a++)b=f[a],b.section(this)}
c.name="FormSection";c.prototype.evaluateValid=function(){return!_.any(this.questions(),function(b){return!b.valid()})};c.prototype.validate=function(){var b,a,d,f;f=this.questions();a=0;for(d=f.length;a<d;a++)b=f[a],b.validate()};c.createFromTransferObject=function(b){var a;if(null!=b.questions){var d,f,e,h;e=b.questions;h=[];d=0;for(f=e.length;d<f;d++)a=e[d],h.push(mygps.model.FormQuestion.createFromTransferObject(a));a=h}return new c(b.id,b.label,a)};c.toTransferObject=function(b){var a;if(b.questions()){var d,
f,e,c;e=b.questions();c=[];d=0;for(f=e.length;d<f;d++)a=e[d],c.push(mygps.model.FormQuestion.toTransferObject(a));a=c}return{id:b.id(),label:b.label(),questions:a}};return c}()})})(jQuery);(function(){return namespace("mygps.model",{Person:function(){function c(b,a,d,f,e,c,j){this.id=ko.observable(b);this.firstName=ko.observable(a);this.lastName=ko.observable(d);this.phoneNumber=ko.observable(f);this.photoURL=ko.observable(c);this.coach=ko.observable(j)}c.name="Person";c.createFromTransferObject=
function(b){var a;null!=b.coach&&(a=mygps.model.Person.createFromTransferObject(b.coach));return new c(b.id,b.firstName,b.lastName,b.phoneNumber,b.emailAddress,b.photoURL,a)};return c}()})})(jQuery);(function(){return namespace("mygps.model",{SelfHelpGuide:function(){function c(b,a,d){this.id=ko.observable(b);this.name=ko.observable(a);this.description=ko.observable(d)}c.name="SelfHelpGuide";c.createFromTransferObject=function(b){return new c(b.id,b.name,b.description)};return c}()})})(jQuery);(function(){return namespace("mygps.model",
{SelfHelpGuideContent:function(c){function b(a,d,f,e,c){b.__super__.constructor.call(this,a,d,f);this.introductoryText=ko.observable(e);this.questions=ko.observableArray(c)}g(b,c);b.name="SelfHelpGuideContent";b.createFromTransferObject=function(a){var d;if(null!=a.questions){var f,e,c,j;c=a.questions;j=[];f=0;for(e=c.length;f<e;f++)d=c[f],j.push(mygps.model.SelfHelpGuideQuestion.createFromTransferObject(d));d=j}return new b(a.id,a.name,a.description,a.introductoryText,d)};return b}(SelfHelpGuide)})})(jQuery);
(function(){return namespace("mygps.model",{SelfHelpGuideQuestion:function(){function c(b,a,d,f,e){this.id=ko.observable(b);this.headingText=ko.observable(a);this.descriptionText=ko.observable(d);this.questionText=ko.observable(f);this.mandatory=ko.observable(e);this.response=ko.observable(null)}c.name="SelfHelpGuideQuestion";c.createFromTransferObject=function(b){return new c(b.id,b.headingText,b.descriptionText,b.questionText,b.mandatory)};return c}()})})(jQuery);(function(){return namespace("mygps.model",
{SelfHelpGuideResponse:function(){function c(b,a,d,f){this.id=ko.observable(b);this.summaryText=ko.observable(a);this.challengesIdentified=ko.observable(d);this.triggeredEarlyAlert=ko.observable(f)}c.name="SelfHelpGuideResponse";c.createFromTransferObject=function(b){var a;if(null!=b.challengesIdentified){var d,f,e,h;e=b.challengesIdentified;h=[];d=0;for(f=e.length;d<f;d++)a=e[d],h.push(mygps.model.Challenge.createFromTransferObject(a));a=h}return new c(b.id,b.summaryText,a,b.triggeredEarlyAlert)};
return c}()})})(jQuery);(function(){return namespace("mygps.model",{Task:function(){function c(b,a,d,f,e,c,j,i,g,m){this.id=ko.observable(b);this.type=ko.observable(a);this.name=ko.observable(d);this.description=ko.observable(f);this.details=ko.observable(e);this.dueDate=ko.observable(c);this.completed=ko.observable(j);this.deletable=ko.observable(i);this.challengeId=ko.observable(g);this.challengeReferralId=ko.observable(m)}c.name="Task";c.createFromTransferObject=function(b){return new c(b.id,b.type,
b.name,b.description,b.details,null!=b.dueDate?new Date(b.dueDate):null,b.completed,b.deletable,b.challengeId,b.challengeReferralId)};return c}()})})(jQuery);(function(){return namespace("mygps.session",{Session:function(){function c(b){var a=this;this.sessionService=b;this.authenticatedPerson=ko.observable(null);this.initialized=ko.observable(!1);this.sessionService.getAuthenticatedPerson({result:function(b){a.authenticatedPerson(b);return a.initialized(!0)},fault:function(b){alert(b.responseText);
return a.initialized(!0)}})}c.name="Session";return c}()})})(jQuery);(function(){return namespace("mygps.service",{AbstractService:function(){function c(b){this.baseURL=b}c.name="AbstractService";c.prototype.createURL=function(b){var a;return"/ssp/MyGPS/"+(""+(null!=(a=this.baseURL)?a:"")+b)};return c}()})})(jQuery);(function(c){return namespace("mygps.service",{ChallengeReferralService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="ChallengeReferralService";a.prototype.getByChallengeId=
function(a,b){return c.ajax({url:this.createURL("/getByChallengeId?challengeId="+a),dataType:"json",success:function(a){var d,c,i,g;g=[];c=0;for(i=a.length;c<i;c++)d=a[c],g.push(mygps.model.ChallengeReferral.createFromTransferObject(d));return null!=b?"function"===typeof b.result?b.result(g):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.search=function(a,b,e){return c.ajax({url:this.createURL("/search?challengeId="+a+"&query="+
b),dataType:"json",success:function(a){var b,d,f,c;c=[];d=0;for(f=a.length;d<f;d++)b=a[d],c.push(mygps.model.ChallengeReferral.createFromTransferObject(b));return null!=e?"function"===typeof e.result?e.result(c):void 0:void 0},error:function(a){return null!=e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",{ChallengeService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,
b);a.name="ChallengeService";a.prototype.search=function(a,b){return c.ajax({url:this.createURL("/search?query="+a),dataType:"json",success:function(a){var d,c,g,k;k=[];c=0;for(g=a.length;c<g;c++)d=a[c],k.push(mygps.model.Challenge.createFromTransferObject(d));return null!=b?"function"===typeof b.result?b.result(k):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",
{MessageService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="MessageService";a.prototype.contactCoach=function(a,b,e){return c.ajax({url:this.createURL(""),type:"POST",data:JSON.stringify({subject:a,message:b}),contentType:"application/json",success:function(a){return null!=e?"function"===typeof e.result?e.result(a):void 0:void 0},error:function(a){return null!=e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);
(function(c){return namespace("mygps.service",{SelfHelpGuideResponseService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="SelfHelpGuideResponseService";a.prototype.cancel=function(a,b){return c.ajax({url:this.createURL("/cancel?selfHelpGuideResponseId="+a),dataType:"json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.complete=
function(a,b){return c.ajax({url:this.createURL("/complete?selfHelpGuideResponseId="+a),dataType:"json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.getById=function(a,b){return c.ajax({url:this.createURL("/getById?selfHelpGuideResponseId="+a),dataType:"json",success:function(a){a=mygps.model.SelfHelpGuideResponse.createFromTransferObject(a);return null!=
b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.initiate=function(a,b){return c.ajax({url:this.createURL("/initiate?selfHelpGuideId="+a),dataType:"text",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.answer=function(a,b,e,h){return c.ajax({url:this.createURL("/answer?selfHelpGuideResponseId="+
a+"&selfHelpGuideQuestionId="+b+"&response="+e),dataType:"json",success:function(a){return null!=h?"function"===typeof h.result?h.result(a):void 0:void 0},error:function(a){return null!=h?"function"===typeof h.fault?h.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",{SelfHelpGuideService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="SelfHelpGuideService";a.prototype.getAll=function(a){return c.ajax({url:this.createURL("/getAll"),
dataType:"json",success:function(b){var c,h,g,i;i=[];h=0;for(g=b.length;h<g;h++)c=b[h],i.push(mygps.model.SelfHelpGuide.createFromTransferObject(c));return null!=a?"function"===typeof a.result?a.result(i):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};a.prototype.getBySelfHelpGuideGroup=function(a,b){return c.ajax({url:this.createURL("/getBySelfHelpGuideGroup?selfHelpGuideGroupId="+a),dataType:"json",success:function(a){var d,c,g,k;k=[];c=
0;for(g=a.length;c<g;c++)d=a[c],k.push(mygps.model.SelfHelpGuide.createFromTransferObject(d));return null!=b?"function"===typeof b.result?b.result(k):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.getContentById=function(a,b){return c.ajax({url:this.createURL("/getContentById?selfHelpGuideId="+a),dataType:"json",success:function(a){a=mygps.model.SelfHelpGuideContent.createFromTransferObject(a);return null!=b?"function"===typeof b.result?
b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",{SessionService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="SessionService";a.prototype.getAuthenticatedPerson=function(a){return c.ajax({url:this.createURL("/getAuthenticatedPerson"),dataType:"json",success:function(b){b=b?mygps.model.Person.createFromTransferObject(b):
null;return null!=a?"function"===typeof a.result?a.result(b):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",{StudentIntakeService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="StudentIntakeService";a.prototype.getForm=function(a){return c.ajax({url:this.createURL("/getForm"),dataType:"json",success:function(b){b=
mygps.model.Form.createFromTransferObject(b);return null!=a?"function"===typeof a.result?a.result(b):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};a.prototype.saveForm=function(a,b){return c.ajax({url:this.createURL("/"),type:"POST",data:JSON.stringify(mygps.model.Form.toTransferObject(a)),contentType:"application/json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=
b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};return a}(mygps.service.AbstractService)})})(jQuery);(function(c){return namespace("mygps.service",{TaskService:function(b){function a(b){a.__super__.constructor.call(this,b)}g(a,b);a.name="TaskService";a.prototype.createCustom=function(a,b,e){return c.ajax({url:this.createURL("/createCustom?name="+encodeURIComponent(a)+"&description="+encodeURIComponent(b)),dataType:"json",success:function(a){a=mygps.model.Task.createFromTransferObject(a);
return null!=e?"function"===typeof e.result?e.result(a):void 0:void 0},error:function(a){return null!=e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};a.prototype.createForChallengeReferral=function(a,b,e){return c.ajax({url:this.createURL("/createForChallengeReferral?challengeId="+a+"&challengeReferralId="+b),dataType:"json",success:function(a){a=mygps.model.Task.createFromTransferObject(a);return null!=e?"function"===typeof e.result?e.result(a):void 0:void 0},error:function(a){return null!=
e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};a.prototype["delete"]=function(a,b){return c.ajax({url:this.createURL("/delete?taskId="+a),dataType:"json",success:function(a){return null!=b?"function"===typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.email=function(a,b){return c.ajax({url:this.createURL("/email?emailAddress="+a),dataType:"json",success:function(a){return null!=b?"function"===
typeof b.result?b.result(a):void 0:void 0},error:function(a){return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};a.prototype.getAll=function(a){return c.ajax({url:this.createURL("/getAll"),dataType:"json",success:function(b){var c,h,g,i;i=[];h=0;for(g=b.length;h<g;h++)c=b[h],i.push(mygps.model.Task.createFromTransferObject(c));return null!=a?"function"===typeof a.result?a.result(i):void 0:void 0},error:function(b){return null!=a?"function"===typeof a.fault?a.fault(b):void 0:void 0}})};
a.prototype.mark=function(a,b,e){return c.ajax({url:this.createURL("/mark?taskId="+a+"&complete="+b),dataType:"json",success:function(a){a=mygps.model.Task.createFromTransferObject(a);return null!=e?"function"===typeof e.result?e.result(a):void 0:void 0},error:function(a){return null!=e?"function"===typeof e.fault?e.fault(a):void 0:void 0}})};a.prototype.print=function(){window.open(this.createURL("/print"));return result(!0)};return a}(mygps.service.AbstractService)})})(jQuery);(function(){return namespace("mygps.viewmodel",
{AbstractSessionViewModel:function(){function c(b){this.session=b;this.authenticated=ko.dependentObservable(this.evaluateAuthenticated,this);this.authenticatedPersonName=ko.dependentObservable(this.authenticatedPersonName,this)}c.name="AbstractSessionViewModel";c.prototype.load=function(){};c.prototype.evaluateAuthenticated=function(){var b;return null!=(null!=(b=this.session)?b.authenticatedPerson():void 0)};c.prototype.authenticatedPersonName=function(){var b,a;b=null!=(a=this.session)?a.authenticatedPerson():
void 0;return null!=b?""+b.firstName()+" "+b.lastName():null};return c}()})})(jQuery);(function(){return namespace("mygps.viewmodel",{AbstractTasksViewModel:function(c){function b(a,d){b.__super__.constructor.call(this,a);this.taskService=d;this.tasks=ko.observableArray([]);this.taskFilters=ko.observableArray(mygps.enumeration.TaskFilter.enumerators);this.selectedTaskFilter=ko.observable(mygps.enumeration.TaskFilter.ALL);this.filteredTasks=ko.dependentObservable(this.filterTasks,this);this.printingTasks=
ko.observable(!1);this.emailingTasks=ko.observable(!1)}g(b,c);b.name="AbstractTasksViewModel";b.prototype.load=function(){b.__super__.load.call(this);this.loadAllTasks()};b.prototype.formatDate=function(a){var b;return null!=a?(b=new Date,a.getFullYear()===b.getFullYear()?""+(a.getMonth()+1)+"/"+a.getDate():""+(a.getMonth()+1)+"/"+a.getDate()+"/"+(""+a.getFullYear()).substring(2)):""};b.prototype.filterTasks=function(){return _.select(this.tasks(),this.selectedTaskFilter().filterFunction)};b.prototype.loadAllTasks=
function(){var a=this;this.taskService.getAll({result:function(b){return a.tasks(b)},fault:function(a){return alert(a.responseText)}})};b.prototype.selectTaskFilter=function(a){this.selectedTaskFilter(a)};b.prototype.createCustomTask=function(a,b,c){var e=this;this.taskService.createCustom(a,b,{result:function(a){e.tasks.push(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){alert(a.responseText);return null!=c?"function"===typeof c.fault?c.fault(a):void 0:
void 0}})};b.prototype.createTaskForChallengeReferral=function(a,b){var c=this;this.taskService.createForChallengeReferral(a.id(),b.id(),{result:function(a){return c.tasks.push(a)},fault:function(a){return alert(a.responseText)}})};b.prototype.createTaskForChallengeReferral=function(a,b,c){var e=this;this.taskService.createForChallengeReferral(a.id(),b.id(),{result:function(a){e.tasks.push(a);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){alert(a.responseText);
return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};b.prototype.markTask=function(a,b){this.taskService.mark(a.id(),b,{result:function(){return a.completed(b)},fault:function(a){return alert(a.responseText)}})};b.prototype.deleteTask=function(a){var b=this;this.taskService["delete"](a.id(),{result:function(){return b.tasks.remove(a)},fault:function(a){return alert(a.responseText)}})};b.prototype.deleteTask=function(a,b){var c=this;this.taskService["delete"](a.id(),{result:function(e){c.tasks.remove(a);
return null!=b?"function"===typeof b.result?b.result(e):void 0:void 0},fault:function(a){alert(a.responseText);return null!=b?"function"===typeof b.fault?b.fault(a):void 0:void 0}})};b.prototype.printTasks=function(){var a=this;this.printingTasks(!0);this.taskService.print({result:function(){return a.printingTasks(!1)},fault:function(b){alert(b.responseText);return a.printingTasks(!1)}})};b.prototype.emailTasks=function(a){var b=this;this.emailingTasks(!0);this.taskService.email(a,{result:function(){return b.emailingTasks(!1)},
fault:function(){alert(fault.responseText);return b.emailingTasks(!1)}})};b.prototype.collectEmailAddress=function(){var a=this;apprise("E-mail address:",{input:!0,validation:function(a){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(a)?"true":"invalid email address"}},function(b){if(b)return a.emailTasks(b)})};return b}(mygps.viewmodel.AbstractSessionViewModel)})})(jQuery);(function(){return namespace("mygps.viewmodel",{ChallengeReferralSearchViewModel:function(c){function b(a,c,f,e){b.__super__.constructor.call(this,
a,c);this.challengeService=f;this.challengeReferralService=e;this.query=ko.observable(null);this.challenges=ko.observableArray();this.selectedChallenge=ko.observable(null);this.selectedChallengeName=ko.dependentObservable(this.evaluateSelectedChallengeName,this);this.referrals=ko.dependentObservable(this.evaluateReferrals,this);this.filteredReferrals=ko.dependentObservable(this.filterReferrals,this);this.allowCustomTaskCreation=ko.observable(!1)}g(b,c);b.name="ChallengeReferralSearchViewModel";b.prototype.evaluateReferrals=
function(){var a;return(null!=(a=this.selectedChallenge())?a.challengeReferrals():void 0)||[]};b.prototype.evaluateSelectedChallengeName=function(){var a;return null!=(a=this.selectedChallenge())?a.name():void 0};b.prototype.filterReferrals=function(){var a=this;return _.select(this.referrals(),function(b){return!_.any(a.tasks(),function(a){return a.challengeReferralId()===b.id()&&!a.completed()})})};b.prototype.load=function(a){null==a&&(a="");b.__super__.load.call(this);this.search(a)};b.prototype.createTaskForChallengeReferral=
function(a,c){var f=this;b.__super__.createTaskForChallengeReferral.call(this,a,c,{result:function(){return f.refresh()},fault:function(a){return alert(a.responseText)}})};b.prototype.markTask=function(a,c){b.__super__.markTask.call(this,a,c);this.refresh()};b.prototype.deleteTask=function(a){var c=this;b.__super__.deleteTask.call(this,a,{result:function(){return c.refresh()},fault:function(a){return alert(a.responseText)}})};b.prototype.search=function(a){this.query(a);this.reset();null!=a&&this.searchChallenges(a)};
b.prototype.refresh=function(){return this.searchChallenges(this.query())};b.prototype.reset=function(){this.challenges.removeAll();return this.selectedChallenge(null)};b.prototype.selectChallenge=function(a){this.selectedChallenge(a);if(null!=this.selectedChallenge()&&0<this.selectedChallenge().referralCount()&&0===this.selectedChallenge().challengeReferrals().length)return this.searchChallengeReferrals(this.selectedChallenge(),this.query())};b.prototype.searchChallenges=function(a){var b=this;this.challengeService.search(a,
{result:function(a){b.challenges(a);return b.allowCustomTaskCreation(0===b.challenges().length)},fault:function(a){return alert(a.responseText)}})};b.prototype.searchChallengeReferrals=function(a,b){return this.challengeReferralService.search(a.id(),b,{result:function(b){return a.challengeReferrals(b)},fault:function(a){return alert(a.responseText)}})};return b}(mygps.viewmodel.AbstractTasksViewModel)})})(jQuery);(function(){return namespace("mygps.viewmodel",{ContactViewModel:function(c){function b(a,
c){b.__super__.constructor.call(this,a);this.messageService=c;this.subject=ko.observable(null);this.message=ko.observable(null);this.contactingCoach=ko.observable(!1)}g(b,c);b.name="ContactViewModel";b.prototype.load=function(){b.__super__.load.call(this)};b.prototype.contactCoach=function(a,b,c){var e=this;this.contactingCoach(!0);this.messageService.contactCoach(a,b,{result:function(a){e.contactingCoach(!1);return null!=c?"function"===typeof c.result?c.result(a):void 0:void 0},fault:function(a){-1!==
a.responseText.indexOf("org.hibernate.exception.ConstraintViolationException")?alert("You must provide a Subject and a Message before it can be sent to your coach."):alert(a.responseText);e.contactingCoach(!1);return null!=c?"function"===typeof c.fault?c.fault(a):void 0:void 0}})};return b}(mygps.viewmodel.AbstractSessionViewModel)})})(jQuery);(function(){return namespace("mygps.viewmodel",{HomeViewModel:function(c){function b(a,c){b.__super__.constructor.call(this,a,c);this.canContactCoach=ko.dependentObservable(this.evaluateCanContactCoach,
this)}g(b,c);b.name="HomeViewModel";b.prototype.load=function(){b.__super__.load.call(this)};b.prototype.evaluateCanContactCoach=function(){var a,b;return null!=(null!=(a=this.session)?null!=(b=a.authenticatedPerson())?b.coach():void 0:void 0)};return b}(mygps.viewmodel.AbstractTasksViewModel)})})(jQuery);(function(){return namespace("mygps.viewmodel",{LoginViewModel:function(){function c(){}c.name="LoginViewModel";c.prototype.load=function(){};return c}()})})(jQuery);(function(){return namespace("mygps.viewmodel",
{SelfHelpGuidesViewModel:function(c){function b(a,c){b.__super__.constructor.call(this,a);this.selfHelpGuideService=c;this.selfHelpGuides=ko.observableArray()}g(b,c);b.name="SelfHelpGuidesViewModel";b.prototype.load=function(a){null==a&&(a=null);b.__super__.load.call(this);this.loadSelfHelpGuides(a)};b.prototype.loadSelfHelpGuides=function(a){var b=this;null==a&&(a=null);null!=a?this.selfHelpGuideService.getBySelfHelpGuideGroup(a,{result:function(a){return b.selfHelpGuides(a)},fault:function(a){return alert(a.responseText)}}):
this.selfHelpGuideService.getAll({result:function(a){return b.selfHelpGuides(a)},fault:function(a){return alert(a.responseText)}})};return b}(mygps.viewmodel.AbstractSessionViewModel)})})(jQuery);(function(){return namespace("mygps.viewmodel",{SelfHelpGuideViewModel:function(c){function b(a,c,f,e,h){b.__super__.constructor.call(this,a,c);this.selfHelpGuideService=f;this.selfHelpGuideResponseService=e;this.challengeReferralService=h;this.selfHelpGuideContent=ko.observable(null);this.selfHelpGuideResponseId=
ko.observable(null);this.selfHelpGuideResponse=ko.observable(null);this.name=ko.dependentObservable(this.evaluateName,this);this.introductoryText=ko.dependentObservable(this.evaluateIntroductoryText,this);this.currentQuestionIndex=ko.observable(0);this.currentQuestion=ko.dependentObservable(this.evaluateCurrentQuestion,this);this.hasPreviousQuestion=ko.dependentObservable(this.evaluateHasPreviousQuestion,this);this.hasNextQuestion=ko.dependentObservable(this.evaluateHasNextQuestion,this);this.canSkipQuestion=
ko.dependentObservable(this.evaluateCanSkipQuestion,this);this.progressText=ko.dependentObservable(this.evaluateProgressText,this);this.challenges=ko.dependentObservable(this.evaluateChallenges,this);this.selectedChallenge=ko.observable(null);this.selectedChallengeName=ko.dependentObservable(this.evaluateSelectedChallengeName,this);this.referrals=ko.dependentObservable(this.evaluateReferrals,this);this.filteredReferrals=ko.dependentObservable(this.filterReferrals,this);this.summaryText=ko.dependentObservable(this.evaluateSummaryText,
this)}g(b,c);b.name="SelfHelpGuideViewModel";b.prototype.load=function(a){b.__super__.load.call(this);this.initiateSelfHelpGuideResponse(a)};b.prototype.createTaskForChallengeReferral=function(a,c){var f=this;b.__super__.createTaskForChallengeReferral.call(this,a,c,{result:function(){return f.refresh()},fault:function(a){return alert(a.responseText)}})};b.prototype.markTask=function(a,c){b.__super__.markTask.call(this,a,c);this.refresh()};b.prototype.deleteTask=function(a){b.__super__.deleteTask.call(this,
a);this.refresh()};b.prototype.evaluateName=function(){var a;return null!=(a=this.selfHelpGuideContent())?a.name():void 0};b.prototype.evaluateIntroductoryText=function(){var a;return null!=(a=this.selfHelpGuideContent())?a.introductoryText():void 0};b.prototype.evaluateCurrentQuestion=function(){var a,b;return null!=(a=this.selfHelpGuideContent())?null!=(b=a.questions())?b[this.currentQuestionIndex()]:void 0:void 0};b.prototype.evaluateHasPreviousQuestion=function(){return null!=this.selfHelpGuideContent()?
0<this.currentQuestionIndex():!1};b.prototype.evaluateHasNextQuestion=function(){return null!=this.selfHelpGuideContent()?this.currentQuestionIndex()<this.selfHelpGuideContent().questions().length-1:!1};b.prototype.evaluateCanSkipQuestion=function(){return null!=this.currentQuestion()?!this.currentQuestion().mandatory():!0};b.prototype.evaluateProgressText=function(){return null!=this.selfHelpGuideContent()?""+(this.currentQuestionIndex()+1)+" of "+this.selfHelpGuideContent().questions().length:""};
b.prototype.evaluateChallenges=function(){var a;return(null!=(a=this.selfHelpGuideResponse())?a.challengesIdentified():void 0)||[]};b.prototype.evaluateSelectedChallengeName=function(){var a;return null!=(a=this.selectedChallenge())?a.name():void 0};b.prototype.evaluateReferrals=function(){var a;return(null!=(a=this.selectedChallenge())?a.challengeReferrals():void 0)||[]};b.prototype.evaluateSummaryText=function(){var a;return null!=(a=this.selfHelpGuideResponse())?a.summaryText():void 0};b.prototype.filterReferrals=
function(){var a=this;return _.select(this.referrals(),function(b){return!_.any(a.tasks(),function(a){return a.challengeReferralId()===b.id()&&!a.completed()})})};b.prototype.loadSelfHelpGuideContent=function(a){var b=this;this.selfHelpGuideService.getContentById(a,{result:function(a){return b.selfHelpGuideContent(a)},fault:function(a){return alert(a.responseText)}})};b.prototype.initiateSelfHelpGuideResponse=function(a){var b=this;this.selfHelpGuideResponseService.initiate(a,{result:function(c){b.selfHelpGuideResponseId(c);
return b.loadSelfHelpGuideContent(a)},fault:function(a){return alert(a.responseText)}})};b.prototype.answerQuestion=function(a,b){var c=this;this.selfHelpGuideResponseService.answer(this.selfHelpGuideResponseId(),a.id(),b,{result:function(){a.response(b);return c.moveToNextQuestion()},fault:function(a){return alert(a.responseText)}})};b.prototype.skipToNextQuestion=function(){if(!this.currentQuestion().mandatory())return this.moveToNextQuestion()};b.prototype.moveToPreviousQuestion=function(){this.hasPreviousQuestion()&&
this.currentQuestionIndex(this.currentQuestionIndex()-1)};b.prototype.moveToNextQuestion=function(){this.hasNextQuestion()?this.currentQuestionIndex(this.currentQuestionIndex()+1):this.complete()};b.prototype.cancel=function(){var a=this;this.selfHelpGuideResponseService.cancel(this.selfHelpGuideResponse().id(),{result:function(){return a.selfHelpGuideResponse().cancelled(!0)},fault:function(a){return alert(a.responseText)}})};b.prototype.complete=function(){var a=this;this.selfHelpGuideResponseService.complete(this.selfHelpGuideResponseId(),
{result:function(){return a.selfHelpGuideResponseService.getById(a.selfHelpGuideResponseId(),{result:function(b){return a.selfHelpGuideResponse(b)},fault:function(a){return alert(a.responseText)}})},fault:function(a){return alert(a.responseText)}})};b.prototype.refresh=function(){var a=this;return this.selfHelpGuideResponseService.getById(this.selfHelpGuideResponseId(),{result:function(b){return a.selfHelpGuideResponse(b)},fault:function(a){return alert(a.responseText)}})};b.prototype.selectChallenge=
function(a){this.selectedChallenge(a);this.challengeReferralService.getByChallengeId(a.id(),{result:function(b){return a.challengeReferrals(b)},fault:function(a){return alert(a.responseText)}})};return b}(mygps.viewmodel.AbstractTasksViewModel)})})(jQuery);(function(c){return namespace("mygps.viewmodel",{StudentIntakeViewModel:function(b){function a(b,c){a.__super__.constructor.call(this,b);this.studentIntakeService=c;this.form=ko.observable(null);this.savingForm=ko.observable(!1);this.invalid=ko.observable(!1);
this.currentSectionIndex=ko.observable(0);this.currentSection=ko.dependentObservable(this.evaluateCurrentSection,this);this.hasPreviousSection=ko.dependentObservable(this.evaluateHasPreviousSection,this);this.hasNextSection=ko.dependentObservable(this.evaluateHasNextSection,this)}g(a,b);a.name="StudentIntakeViewModel";a.prototype.load=function(){a.__super__.load.call(this);this.loadForm()};a.prototype.evaluateCurrentSection=function(){var a,b;return null!=(a=this.form())?null!=(b=a.sections())?b[this.currentSectionIndex()]:
void 0:void 0};a.prototype.evaluateHasPreviousSection=function(){return null!=this.form()?0<this.currentSectionIndex():!1};a.prototype.evaluateHasNextSection=function(){return null!=this.form()?this.currentSectionIndex()<this.form().sections().length-1:!1};a.prototype.loadForm=function(){var a=this;this.studentIntakeService.getForm({result:function(b){return a.form(b)},fault:function(a){var b,d;return alert(null!=(b=null!=(d=c.parseJSON(a.responseText))?d.message:void 0)?b:a.responseText)}})};a.prototype.saveForm=
function(a){var b=this;this.currentSection().validate();this.currentSection().valid()?(this.invalid(!1),this.savingForm(!0),this.studentIntakeService.saveForm(this.form(),{result:function(c){b.savingForm(!1);return null!=a?"function"===typeof a.result?a.result(c):void 0:void 0},fault:function(c){b.savingForm(!1);alert(c.responseText);return null!=a?"function"===typeof a.fault?a.fault(c):void 0:void 0}})):this.invalid(!0)};a.prototype.moveToPreviousSection=function(){return this.hasPreviousSection()?
(this.currentSectionIndex(this.currentSectionIndex()-1),this.invalid(!1),!0):!1};a.prototype.moveToNextSection=function(){if(this.hasNextSection()){this.currentSection().validate();if(this.currentSection().valid())return this.invalid(!1),this.currentSectionIndex(this.currentSectionIndex()+1),!0;this.invalid(!0)}return!1};return a}(mygps.viewmodel.AbstractSessionViewModel)})})(jQuery)}).call(this);
